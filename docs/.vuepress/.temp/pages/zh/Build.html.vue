<template><div><blockquote>
<p><strong>æ³¨æ„</strong>ï¼šæœ¬æ–‡æ¡£å°šæœªç¿»è¯‘ã€‚æ¬¢è¿è´¡çŒ®ï¼</p>
</blockquote>
<h1 id="æ„å»º" tabindex="-1"><a class="header-anchor" href="#æ„å»º"><span>æ„å»º</span></a></h1>
<p>ä½ éœ€è¦è·å– libcapã€libseccompã€libpthreadã€‚</p>
<h1 id="ä½¿ç”¨-build-c-æ„å»º-å®éªŒæ€§" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-build-c-æ„å»º-å®éªŒæ€§"><span>ä½¿ç”¨ build.c æ„å»ºï¼ˆå®éªŒæ€§ï¼‰</span></a></h1>
<p>æˆ‘ä»¬å¾ˆé«˜å…´ä¸º ruri å¼•å…¥ä¸€ä¸ªæ–°çš„æ„å»ºç³»ç»Ÿï¼šbuild.c
å®ƒæ˜¯ä¸€ä¸ªçº¯ C ç¨‹åºï¼Œä¸ä¾èµ–äºä»»ä½•å¤–éƒ¨æ„å»ºç³»ç»Ÿã€‚
è¿™æ˜¯è®¡ç®—æœºç§‘å­¦å²ä¸Šçš„ä¸€å¤§æ­¥å€’é€€ï¼ï¼ï¼
å¤ªå¥½äº† ğŸ˜ƒ
è¦ä½¿ç”¨å®ƒï¼Œåªéœ€ <code v-pre>cc build.c</code> å’Œ <code v-pre>./a.out</code>ã€‚
å¦‚éœ€å¸®åŠ©ï¼Œè¯·å‚é˜… <code v-pre>./a.out -h</code>ã€‚</p>
<h1 id="ä½¿ç”¨-autoconf-æ„å»º-æ¨è" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-autoconf-æ„å»º-æ¨è"><span>ä½¿ç”¨ autoconf æ„å»ºï¼ˆæ¨èï¼‰</span></a></h1>
<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre v-pre><code><span class="line">git clone https://github.com/Moe-hacker/ruri</span>
<span class="line">cd ruri</span>
<span class="line">aclocal</span>
<span class="line">autoconf</span>
<span class="line">./configure --enable-static</span>
<span class="line">make</span>
<span class="line">sudo cp ruri /usr/bin/ruri</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ³¨æ„" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„"><span>æ³¨æ„ï¼š</span></a></h2>
<p>æµ‹è¯•è„šæœ¬ä¸­æœ‰ä¸€éƒ¨åˆ†å¿…é¡»ä½¿ç”¨ <code v-pre>sudo</code> è¿è¡Œï¼Œ<code v-pre>ä¸è¦</code> åœ¨ä½ çš„è®¾å¤‡ä¸Šè¿è¡Œ <code v-pre>make test</code>ï¼ï¼ï¼ï¼</p>
<h2 id="æ„å»ºé€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#æ„å»ºé€‰é¡¹"><span>æ„å»ºé€‰é¡¹ï¼š</span></a></h2>
<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre v-pre><code><span class="line">  --enable-coreonly       ä»…ç¼–è¯‘æ ¸å¿ƒ</span>
<span class="line">  --disable-libcap        ç¦ç”¨ libcap æ”¯æŒ</span>
<span class="line">  --disable-libseccomp    ç¦ç”¨ libseccomp æ”¯æŒ</span>
<span class="line">  --disable-rurienv       ç¦ç”¨ .rurienv æ”¯æŒ</span>
<span class="line">  --enable-static         å¯ç”¨é™æ€æ„å»º</span>
<span class="line">  --enable-debug          å¯ç”¨è°ƒè¯•æ—¥å¿—</span>
<span class="line">  --enable-dev            å¯ç”¨å¼€å‘æ„å»º</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼š<code v-pre>--enable-coreonly</code> å°†è‡ªåŠ¨å¯ç”¨ <code v-pre>--disable-libseccomp --disable-libcap --disable-rurienv</code></p>
<h1 id="ä½¿ç”¨-cmake-æ„å»º-ç”¨äºä¸‹æ¸¸" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-cmake-æ„å»º-ç”¨äºä¸‹æ¸¸"><span>ä½¿ç”¨ CMake æ„å»ºï¼ˆç”¨äºä¸‹æ¸¸ï¼‰</span></a></h1>
<p>ï¼ˆå¦‚æœä½ æ›´å–œæ¬¢ä½¿ç”¨ CMakeï¼‰</p>
<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre v-pre><code><span class="line">git clone https://github.com/Moe-hacker/ruri</span>
<span class="line">cd ruri</span>
<span class="line">cmake .</span>
<span class="line">make</span>
<span class="line">make install</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="cmake-ä¸­çš„æ„å»ºé€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#cmake-ä¸­çš„æ„å»ºé€‰é¡¹"><span>CMake ä¸­çš„æ„å»ºé€‰é¡¹ï¼š</span></a></h2>
<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre v-pre><code><span class="line">  -DBUILD_LIB=on             ç¼–è¯‘ä¸ºå…±äº«åº“</span>
<span class="line">  -DDISABLE_LIBCAP=on        ç¦ç”¨ libcap æ”¯æŒ</span>
<span class="line">  -DDISABLE_LIBSECCOMP=on    ç¦ç”¨ libseccomp æ”¯æŒ</span>
<span class="line">  -DDISABLE_RURIENV=on       ç¦ç”¨ .rurienv æ”¯æŒ</span>
<span class="line">  -DENABLE_STATIC=on         å¯ç”¨é™æ€æ„å»º</span>
<span class="line">  -DENABLE_DEBUG=on          å¯ç”¨è°ƒè¯•æ—¥å¿—</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼š</p>
<ul>
<li>-DENABLE_DEBUG=on ç›¸å½“äºä¼ ç»Ÿæ„å»ºé€‰é¡¹ --enable-dev åŠ ä¸Š --enable-debug</li>
<li>å½“åŒæ—¶å¯ç”¨ DISABLE_RURIENVã€DISABLE_LIBSECCOMP å’Œ DISABLE_LIBCAP æ—¶ï¼Œç›¸å½“äºä¼ ç»Ÿæ„å»ºè¿‡ç¨‹ä¸­çš„ --enable-coreonly</li>
</ul>
<h2 id="é…ç½®å®Œæˆæ—¶-cmake-ä¸­çš„å…¶ä»–ç›®æ ‡" tabindex="-1"><a class="header-anchor" href="#é…ç½®å®Œæˆæ—¶-cmake-ä¸­çš„å…¶ä»–ç›®æ ‡"><span>é…ç½®å®Œæˆæ—¶ CMake ä¸­çš„å…¶ä»–ç›®æ ‡ï¼š</span></a></h2>
<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre v-pre><code><span class="line">  format      è¿è¡Œ clang-format æ­¥éª¤</span>
<span class="line">  strip       è¿è¡Œ strip æ­¥éª¤</span>
<span class="line">  tidy        è¿è¡Œ clang-tidy æ­¥éª¤</span>
<span class="line"></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>


